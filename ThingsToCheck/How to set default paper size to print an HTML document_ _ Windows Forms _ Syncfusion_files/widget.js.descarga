window.swaychat||(window.swaychat={}),function(d,p){function init(data){!data||data&&!data.version||(p.pkg=data,p.assets="//"+("swaychat"in window&&p.cdn?p.cdn:"cdn")+".swaychat.com/assets/"+p.pkg.version+"/",window.Firebase||load_scripts.push(p.assets+"js/socket.js"),load_scripts.push(p.assets+"js/bs.js"),!window.jQuery||window.jQuery&&0==/1\.11\.[1-99]$/.test(jQuery.fn.jquery)?getjQuery():loadScripts())}function loadVersion(){"string"==typeof this.responseText&&init(JSON.parse(this.responseText))}function loadScripts(nc){var j=nc?nc:jQuery;j.cachedScript=function(url,options){return options=j.extend(options||{},{dataType:"script",cache:!0,url:url}),j.ajax(options)},j.getMultiScripts=function(arr){var _arr=j.map(arr,function(scr){return j.cachedScript(scr)});return _arr.push(j.Deferred(function(deferred){j(deferred.resolve)})),j.when.apply(j,_arr)},j.getMultiScripts(load_scripts).then(function(){var task=j.Deferred();return window.Firebase&&window.Bugsnag&&(p.Fb=Firebase,p.$=j,p.bs=Bugsnag.noConflict(),task.resolve()),task.reject(),task.promise()}).then(function(){return j.cachedScript(p.assets+"js/chat.js")}).fail(function(){retry?p.bs&&p.bs.notify("widget.js error"):(retry+=1,loadScripts(j))})}function getjQuery(){var head=d.head||d.getElementsByTagName("head")[0],script=d.createElement("script");script.src=p.assets+"js/jlib.js",script.onload=script.onreadystatechange=function(){(!this.readyState||/loaded|complete/.test(this.readyState))&&(script.onload=script.onreadystatechange=null,script.parentNode&&script.parentNode.removeChild(script),script=null,loadScripts(jQuery.noConflict(!0)))},head.insertBefore(script,head.firstChild)}var load_scripts=[],v_url="//"+("swaychat"in window&&p.cdn?p.cdn:"cdn")+".swaychat.com/assets/version.js",retry=0,xhr=window.XDomainRequest?new XDomainRequest:window.XMLHttpRequest?new XMLHttpRequest:!1;xhr&&JSON&&(xhr.onload=loadVersion,xhr.open("GET",v_url,!0),xhr.send())}(document,swaychat);